import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Predict average calls using your existing model (with interaction terms)
post_monday['Prediction'] = results.predict(post_monday)

# Group by day and Monday flag
plot_df = post_monday.groupby(['Day_of_Week', 'High_Missed_Monday_FF'])['Prediction'].mean().reset_index()

# Make it human-readable
plot_df['High_Missed_Monday_FF'] = plot_df['High_Missed_Monday_FF'].map({True: 'After High Missed Monday', False: 'After Normal Monday'})

# Sort days for better x-axis
day_order = ['Tuesday', 'Wednesday', 'Thursday', 'Friday']
plot_df['Day_of_Week'] = pd.Categorical(plot_df['Day_of_Week'], categories=day_order, ordered=True)
plot_df.sort_values(by='Day_of_Week', inplace=True)

# Plot
plt.figure(figsize=(10, 6))
sns.barplot(data=plot_df, x='Day_of_Week', y='Prediction', hue='High_Missed_Monday_FF')
plt.title('Predicted Offered Calls: Normal vs High Missed Call Monday')
plt.ylabel('Predicted Offered Calls')
plt.xlabel('Day of Week')
plt.legend(title='Week Type')
plt.grid(axis='y', linestyle='--', alpha=0.7)
plt.tight_layout()
plt.show()






------------------




import seaborn as sns
import matplotlib.pyplot as plt

# Scatter + regression line
plt.figure(figsize=(8, 6))
sns.regplot(
    data=reg_data,  # from earlier regression
    x='Monday_MissedCalls',
    y='Offered',
    scatter_kws={'alpha': 0.3},
    line_kws={'color': 'red'}
)
plt.title('Regression: Monday Missed Calls vs. Offered Calls (Tue–Fri)')
plt.xlabel('Monday Missed Calls')
plt.ylabel('Offered Calls (Tue–Fri)')
plt.grid(alpha=0.3)
plt.tight_layout()
plt.show()









--------------------


# Plot regression lines by day
plt.figure(figsize=(10, 6))
sns.lmplot(
    data=reg_data,
    x='Monday_MissedCalls',
    y='Offered',
    hue='DayOfWeek',
    aspect=1.4,
    height=6,
    scatter_kws={'alpha': 0.3}
)
plt.title('Regression: Monday Missed Calls vs. Offered Calls, by Day of Week')
plt.xlabel('Monday Missed Calls')
plt.ylabel('Offered Calls')
plt.tight_layout()
plt.show()
